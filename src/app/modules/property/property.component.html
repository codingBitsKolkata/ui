<!-- Header Image -->
<div class="container-fluid header-image-slide p-0">
  <img class="w-100" src="assets/images/property-banner.png" />
</div>

<div class="container-fluid pt-4 pb-2 filter-container">
  <div class="row">
    <div class="col-md-3">
      <div class="property-found">
          <span class="icon"></span>
          <p class="pl-1"><span>{{propertyList.length}} {{selectedPropertyTypeName}} </span> properties found</p>
        </div>
    </div>
    <div class="col-md-6">
      <!-- Filter Section -->
      <div class="sorting-result">
        <span class="icon"></span>
        <p class="pl-1 pr-3"><span>Sorting  </span> results by</p>
        <div class="btn-group btn-group-toggle" ngbRadioGroup name="filterBy" [(ngModel)]="filterBy">
          <div class="btn-group-toggle">
            <label class="btn-checkbox-filter" ngbButtonLabel>
              <input type="radio" ngbButton [value]="'rating'"> Popularity
            </label>
          </div>
          <div class="btn-group-toggle">
            <label class="btn-checkbox-filter" ngbButtonLabel>
              <input type="radio" ngbButton [value]="'totalPrice'"> Price lowest first
              <i class="fa fa-long-arrow-down ml-2" aria-hidden="true"></i>
            </label>
          </div>
          <div class="btn-group-toggle">
            <label class="btn-checkbox-filter" ngbButtonLabel>
              <input type="radio"  ngbButton [value]="'reviewCount'"> Couples Friendly 
            </label>
          </div>
          <div class="btn-group-toggle">
            <label class="btn-checkbox-filter" ngbButtonLabel>
              <input type="radio"  ngbButton [value]="'propertyId'"> Pet Friendly  
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="map-filter">
        <span class="icon"></span>
        <p class="pl-1">Show Map</p>
        <ui-switch [(ngModel)]="mapShowHide" size="small"></ui-switch>
      </div>
    </div>
  </div>
</div>
<hr class="m-0">

<div class="container-fluid property-list-section">
  <div class="row">
    <!-- Filter Section -->
    <div class="col-md-3 pt-24">
      <!-- Property Booking Form -->
      <div class="booking-section mb-4">
          <div class="card">
            <div class="card-header">
                Book your stay
            </div>
            <div class="card-body">
                <app-stay-search-form [propertyTypes] = "propertyTypes" [searchObj]="searchObj" [pageName]="'PROPERTY'" (searchFormSubmitted)="searchFormSubmitted($event)"></app-stay-search-form>
            </div>
          </div>
        </div>

      <!-- Quick Filter -->
      <div class="card quick-filter-section mb-3">
        <div class="card-header">Quick filter</div>
        <app-quick-filter [selectedPropertyTypeName]="selectedPropertyTypeName" (filterSelected)="filterSelected($event)"></app-quick-filter>
      </div>
    </div>
    
    <!-- Property List Section -->
    <div class="pt-24"  [ngClass]="mapShowHide ? 'col-md-6':'col-md-9'">
      <!-- Property List -->
      <div class="property-listing-area mb-4">
          <ng-template ngFor let-i="index" let-c="count" let-property [ngForOf]="propertyList | orderBy: filterBy">
        <div class="property-item d-flex">
          <div class="mr-20">
            <img width="260px" height="150px"  [src]="property.coverImageURL!= null ? property.coverImageURL : 'assets/images/property/property-1.png'" src="assets/images/property/property-1.png" />
          </div>
          <div class="w-100">
            <div class="clearfix">
              <p class="float-left ora-id">{{property.oraName}}</p>
              <p class="float-right">
                <a href=""><span class="fa fa-bookmark-o icon"></span></a>
                <a href=""><span class="fa fa-share-alt icon ml-2"></span></a>
              </p>
            </div>
            <div class="clearfix">
              <p class="float-left address"><span class="address-icon"></span> {{property.address}}</p>
              <p class="float-right pet-friendly"><span class="pet-icon"></span> Pet friendly </p>
            </div>
            <div class="clearfix">
              <p class="float-left rating"><span class="badge badge-primary">{{property.rating}}</span> {{sharedSrv.getRatingText(property.rating)}} <span class="text-gray">{{property.reviewCount}} reviews</span></p>
              <p class="float-right couples-frindly"><span class="couples-icon"></span> Couple friendly </p>
            </div>
            <div class="clearfix">
              <p class="float-left complementary">Complimentary 
                  <span *ngIf="property.mealFlag" class="complimentary-tea"></span>

                        <span *ngFor="let amenitie of property.amenities">
                            <img class="card-img-top rounded" [src]="amenitie.imgUrl1" [alt]="amenitie.aminitiesName">
                        </span>
              </p>
            </div>
            <div class="alert alert-secondary clearfix" role="alert">
              <div class="float-left">
                <h6 class="price"><span>â‚¹ {{property.totalPrice | number:'.2'}}</span> Per night</h6>
                <p class="total-times-book">Booked 21 times in the last 24 hours</p>
              </div>
              <button class="btn btn-dark btn-sm float-right" (click)="navigateToBookingPage(property.propertyId)">Book now</button>
            </div>
          </div>
        </div>
        <hr class="mb-4 mt-4">
        </ng-template>
      </div>
    </div>

    <!-- Map Section -->
    <div *ngIf="propertyList.length > 0" [hidden]="!mapShowHide" class="col-md-3">
      <div class="map-container">
          <agm-map [latitude]="+searchObj?.latitude" [longitude]="+searchObj?.longitude"  [zoom]='10'>
              <agm-marker *ngFor="let property of propertyList" [latitude]="+property.latitude" [longitude]="+property.longitude">
                <agm-info-window>{{property.oraName}}</agm-info-window>
              </agm-marker>
          </agm-map>
      </div>
    </div>
  </div>
</div>
<hr>
<!-- Deals for you -->
<div class="container-fluid pt-4 pb-4 deals-section">
  <div class="container">
    <h4 class="title">Deals for you</h4>
    <p class="text">Unique destinations to help travellers plan trips</p>
    <div class="row">
      <div class="col-md-3">
        <img src="assets/images/deals/30LastMinutDeals.png" />
      </div>
      <div class="col-md-3">
        <img src="assets/images/deals/BestOraRoom779.png" />
      </div>
      <div class="col-md-3">
        <img src="assets/images/deals/EarnExtraAsHost.png" />
      </div>
      <div class="col-md-3">
        <img src="assets/images/deals/30LastMinutDeals.png" />
      </div>
    </div>
  </div>
</div>